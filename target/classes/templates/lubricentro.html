<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="/fragments/head :: head"></head>
    <body>
        <!-- Navbar -->
        <section data-bs-version="5.1" class="menu menu3 cid-ug0nmDUkh7" once="menu" id="menu3-l">
            <nav th:replace="/fragments/navbar :: nav"></nav>    
        </section>

        <!-- Dashboard Section -->
        <section class="container my-5">
            <div class="row">
                <div class="col-12 text-center">
                    <h2>Dashboard del Usuario</h2>
                    <p>Hola, <strong th:text="${session.usuariosession.nombreUsuario}"></strong></p>
                </div>
            </div>
            
            <div class="row justify-content-center mt-4">
                <!-- Tarjeta de resumen -->
                <div class="col-lg-4 mb-4">
                    <div class="card bg-light shadow-sm p-3">
                        <h5 class="card-title text-center">Resumen</h5>
                        <p class="mb-1"><strong>Marca:</strong> <span th:text="${miLubri.marca}"></span></p>
                        <p class="mb-1"><strong>Teléfono:</strong> <span th:text="${miLubri.telefono}"></span></p>
                        <p class="mb-1"><strong>Sitio Web:</strong> <span th:text="${miLubri.sitioWeb}"></span></p>
                        <p class="mb-1"><strong>Vehículos Atendidos:</strong> <span th:text="${cantClientes}"></span></p>
                    </div>
                    <!-- Tarjeta de agregar sucursal -->
                    <div class="card bg-light shadow-sm p-3 text-center mt-3">
                        <h5 class="card-title">Agregar Sucursal</h5>
                        <p class="text-muted">Próximamente...</p>
                    </div>
                     <!-- Tarjeta de agregar servicios próximamente -->
                    <div class="card bg-light shadow-sm p-3 text-center mt-3">
                        <h5 class="card-title">Agregar Servicios</h5>
                        <a href="#" class="text-muted">Mejorar plan...</a>
                    </div>
                </div>
                
                <!-- Formulario para editar datos -->
                <div class="col-lg-8">
                    <form th:action="@{/modificar-usuario}" method="POST" enctype="multipart/form-data" class="bg-light p-4 rounded shadow-sm">
                        
                        <input hidden="hidden" name="id" th:value="${miLubri.id}">
                        <p th:text="${errorM}"></p>
                        <div class="mb-3">
                            <label for="marca" class="form-label">Marca del Lubricentro</label>
                            <input type="text" class="form-control" id="marca" name="marca" th:value="${miLubri.marca}">
                        </div>
                        <div class="mb-3">
                            <label for="slogan" class="form-label">Slogan</label>
                            <input type="text" class="form-control" id="slogan" name="slogan" th:value="${miLubri.slogan}">
                        </div>
                        <div class="mb-3">
                            <label for="nombreUsuario" class="form-label">Nombre del contacto</label>
                            <input type="text" class="form-control" id="direccion" name="nombreUsuario" th:value="${miLubri.nombreUsuario}">
                        </div>
                        <div class="mb-3">
                            <label for="foto" class="form-label">Foto de Portada</label>
                            <input type="file" class="form-control" id="foto" name="archivo" th:value="${miLubri.foto}">
                            <div class="mt-3 text-center">
                                <img th:if="${miLubri.foto != null}" th:src="${'/foto/lubriRegistro/' + miLubri.id}" alt="Foto de portada" class="img-fluid rounded">
                                <p th:if="${miLubri.foto == null}" class="text-muted">No se ha subido una foto aún.</p>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="mail" class="form-label">e-mail</label>
                            <input type="text" class="form-control" id="direccion" name="mailUsuario" th:value="${miLubri.mailUsuario}" >
                        </div>
                        <div class="mb-3">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" class="form-control" id="direccion" name="calle" th:value="${miLubri.calle}" >
                        </div>
                        <div class="mb-3">
                            <label for="altura" class="form-label">Altura</label>
                            <input type="text" class="form-control" id="direccion" name="altura" th:value="${miLubri.altura}" >
                        </div>
                        <div class="mb-3">
                            <label for="localidad" class="form-label">Localidad</label>
                            <input type="text" class="form-control" id="direccion" name="localidad" th:value="${miLubri.localidad}" >
                        </div>
                        <div class="mb-3">
                            <label for="telefono" class="form-label">Teléfono</label>
                            <input type="tel" class="form-control" id="telefono" name="telefono" th:value="${miLubri.telefono}">
                        </div>
                        <div class="mb-3">
                            <label for="sitioWeb" class="form-label">Sitio Web</label>
                            <input type="text" class="form-control" id="" name="sitioWeb" th:value="${miLubri.sitioWeb}">
                        </div>
                        <div class="mb-3">
                            <label for="clave1" class="form-label">Modificar Clave</label>
                            <input type="password" class="form-control" id="sitioWeb" name="clave1" value="">
                        </div>
                        <div class="mb-3">
                            <label for="clave2" class="form-label">Repetir contraseña</label>
                            <input type="password" class="form-control" id="sitioWeb" name="clave2" value="">
                        </div>
                        <div class="d-flex justify-content-between">
                            <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                            <a href="/misClientes" class="btn btn-secondary">Volver a mis clientes</a>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <section data-bs-version="5.1" class="footer3 cid-ueSdjpg0mu" once="footers" id="footer3-2">
            <footer th:replace="/fragments/footer :: footer"></footer>
        </section>
        
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
